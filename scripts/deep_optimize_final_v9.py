
import json
import os
from pathlib import Path

# Mapping for the final 15 files
CONCEPT_MAP = {
    # --- Config Files ---
    "100_é…ç½®ç‰ˆæœ¬": {
        "title": "ç¯å¢ƒé…ç½®: æ£€æŸ¥è¡Œæç®±",
        "analogy_title": "ğŸ§³ å‡ºå‘å‰çš„å‡†å¤‡",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ è¦å»ä¸€æ¬¡é•¿é€”æ—…è¡Œï¼ˆæ·±åº¦å­¦ä¹ ä¹‹æ—…ï¼‰ã€‚
åœ¨å‡ºå‘å‰ï¼Œå¿…é¡»æ£€æŸ¥è¡Œæç®±ï¼š
- æŠ¤ç…§å¸¦äº†å—ï¼Ÿ (Pythonç‰ˆæœ¬)
- è¡£æœå¸¦å¤Ÿäº†å—ï¼Ÿ (PyTorchåº“)
- å……ç”µå™¨å¸¦äº†å—ï¼Ÿ (CUDAç¯å¢ƒ)

**é…ç½®ç‰ˆæœ¬** å°±æ˜¯æ£€æŸ¥ä½ çš„ç”µè„‘ç¯å¢ƒæ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œç¡®ä¿æ—…é€”ä¸­ä¸ä¼šå› ä¸ºå°‘å¸¦ä¸œè¥¿è€Œåœè½¦ã€‚
""",
        "problem": "ä¸åŒç‰ˆæœ¬çš„è½¯ä»¶å¯èƒ½ä¸å…¼å®¹ï¼Œå¯¼è‡´ä»£ç è¿è¡ŒæŠ¥é”™ã€‚",
        "solution": "æ‰“å°å¹¶ç¡®è®¤å…³é”®åº“çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚"
    },
    "201_é…ç½®ç‰ˆæœ¬": { # Mapping similar
         "title": "ç¯å¢ƒé…ç½®: æ£€æŸ¥è¡Œæç®±",
         "analogy_title": "ğŸ§³ å‡ºå‘å‰çš„å‡†å¤‡",
         "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ è¦å»ä¸€æ¬¡é•¿é€”æ—…è¡Œï¼ˆæ·±åº¦å­¦ä¹ ä¹‹æ—…ï¼‰ã€‚
åœ¨å‡ºå‘å‰ï¼Œå¿…é¡»æ£€æŸ¥è¡Œæç®±ï¼š
- æŠ¤ç…§å¸¦äº†å—ï¼Ÿ (Pythonç‰ˆæœ¬)
- è¡£æœå¸¦å¤Ÿäº†å—ï¼Ÿ (PyTorchåº“)
- å……ç”µå™¨å¸¦äº†å—ï¼Ÿ (CUDAç¯å¢ƒ)

**é…ç½®ç‰ˆæœ¬** å°±æ˜¯æ£€æŸ¥ä½ çš„ç”µè„‘ç¯å¢ƒæ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œç¡®ä¿æ—…é€”ä¸­ä¸ä¼šå› ä¸ºå°‘å¸¦ä¸œè¥¿è€Œåœè½¦ã€‚
""",
        "problem": "ä¸åŒç‰ˆæœ¬çš„è½¯ä»¶å¯èƒ½ä¸å…¼å®¹ï¼Œå¯¼è‡´ä»£ç è¿è¡ŒæŠ¥é”™ã€‚",
        "solution": "æ‰“å°å¹¶ç¡®è®¤å…³é”®åº“çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚"
    },
    "300_é…ç½®ç‰ˆæœ¬": { # Mapping similar
         "title": "ç¯å¢ƒé…ç½®: æ£€æŸ¥è¡Œæç®±",
         "analogy_title": "ğŸ§³ å‡ºå‘å‰çš„å‡†å¤‡",
         "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ è¦å»ä¸€æ¬¡é•¿é€”æ—…è¡Œï¼ˆæ·±åº¦å­¦ä¹ ä¹‹æ—…ï¼‰ã€‚
åœ¨å‡ºå‘å‰ï¼Œå¿…é¡»æ£€æŸ¥è¡Œæç®±ï¼š
- æŠ¤ç…§å¸¦äº†å—ï¼Ÿ (Pythonç‰ˆæœ¬)
- è¡£æœå¸¦å¤Ÿäº†å—ï¼Ÿ (PyTorchåº“)
- å……ç”µå™¨å¸¦äº†å—ï¼Ÿ (CUDAç¯å¢ƒ)

**é…ç½®ç‰ˆæœ¬** å°±æ˜¯æ£€æŸ¥ä½ çš„ç”µè„‘ç¯å¢ƒæ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œç¡®ä¿æ—…é€”ä¸­ä¸ä¼šå› ä¸ºå°‘å¸¦ä¸œè¥¿è€Œåœè½¦ã€‚
""",
        "problem": "ä¸åŒç‰ˆæœ¬çš„è½¯ä»¶å¯èƒ½ä¸å…¼å®¹ï¼Œå¯¼è‡´ä»£ç è¿è¡ŒæŠ¥é”™ã€‚",
        "solution": "æ‰“å°å¹¶ç¡®è®¤å…³é”®åº“çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚"
    },
    "400_é…ç½®ç‰ˆæœ¬": { # Mapping similar
         "title": "ç¯å¢ƒé…ç½®: æ£€æŸ¥è¡Œæç®±",
         "analogy_title": "ğŸ§³ å‡ºå‘å‰çš„å‡†å¤‡",
         "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ è¦å»ä¸€æ¬¡é•¿é€”æ—…è¡Œï¼ˆæ·±åº¦å­¦ä¹ ä¹‹æ—…ï¼‰ã€‚
åœ¨å‡ºå‘å‰ï¼Œå¿…é¡»æ£€æŸ¥è¡Œæç®±ï¼š
- æŠ¤ç…§å¸¦äº†å—ï¼Ÿ (Pythonç‰ˆæœ¬)
- è¡£æœå¸¦å¤Ÿäº†å—ï¼Ÿ (PyTorchåº“)
- å……ç”µå™¨å¸¦äº†å—ï¼Ÿ (CUDAç¯å¢ƒ)

**é…ç½®ç‰ˆæœ¬** å°±æ˜¯æ£€æŸ¥ä½ çš„ç”µè„‘ç¯å¢ƒæ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œç¡®ä¿æ—…é€”ä¸­ä¸ä¼šå› ä¸ºå°‘å¸¦ä¸œè¥¿è€Œåœè½¦ã€‚
""",
        "problem": "ä¸åŒç‰ˆæœ¬çš„è½¯ä»¶å¯èƒ½ä¸å…¼å®¹ï¼Œå¯¼è‡´ä»£ç è¿è¡ŒæŠ¥é”™ã€‚",
        "solution": "æ‰“å°å¹¶ç¡®è®¤å…³é”®åº“çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚"
    },
    "407_PythonAPIç¯å¢ƒå®‰è£…": {
        "title": "APIç¯å¢ƒ: æ¥é€šç”µè¯çº¿",
        "analogy_title": "ğŸ“ è¿çº¿æœªæ¥",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ æƒ³ç»™è¿œæ–¹çš„è¶…çº§å¤§è„‘ï¼ˆOpenAIï¼‰æ‰“ç”µè¯ã€‚
ä½ ä¸èƒ½ç›´æ¥å–Šï¼Œä½ éœ€è¦ä¸€éƒ¨ç”µè¯æœºï¼ˆSDKï¼‰å’Œç”µè¯çº¿ï¼ˆAPI Keyï¼‰ã€‚

**ç¯å¢ƒå®‰è£…** å°±æ˜¯ï¼š
1. ä¹°ç”µè¯æœº (pip install openai)
2. æ’ä¸Šç”µè¯çº¿ (è®¾ç½® API Key)
3. æ‹¨é€šç”µè¯ (Hello World)
""",
        "problem": "æœ¬åœ°ç”µè„‘æ— æ³•ç›´æ¥è¿è¡Œå‡ åƒäº¿å‚æ•°çš„å¤§æ¨¡å‹ã€‚",
        "solution": "å®‰è£…å®˜æ–¹SDKï¼Œé…ç½®è®¤è¯å¯†é’¥ï¼Œé€šè¿‡ç½‘ç»œè¯·æ±‚è°ƒç”¨äº‘ç«¯æ¨¡å‹ã€‚"
    },

    # --- Intro & Strategy ---
    "200_æ·±åº¦å­¦ä¹ ä»‹ç»": {
        "title": "æ·±åº¦å­¦ä¹ : å¼€å¯æ–°ä¸–ç•Œ",
        "analogy_title": "ğŸš€ æ¬¢è¿æ¥åˆ°é­”æ³•å­¦æ ¡",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä»¥å‰çš„ç¼–ç¨‹ï¼ˆè§„åˆ™ç¼–ç¨‹ï¼‰æ˜¯æ•™ç”µè„‘"æ€ä¹ˆåš"ï¼š
- "å¦‚æœæ˜¯çŒ«ï¼Œè€³æœµæ˜¯å°–çš„ã€‚"

**æ·±åº¦å­¦ä¹ ** æ˜¯ç»™ç”µè„‘çœ‹ä¸€ä¸‡å¼ çŒ«çš„ç…§ç‰‡ï¼Œè®©å®ƒè‡ªå·±"æ‚Ÿ"ï¼š
- "å“¦ï¼ŒåŸæ¥è¿™å°±æ˜¯çŒ«ã€‚"

è¿™èŠ‚è¯¾æ˜¯æˆ‘ä»¬é­”æ³•å­¦æ ¡çš„å¼€å­¦å…¸ç¤¼ï¼Œå¸¦ä½ çœ‹çœ‹è¿™ä¸ªæ–°ä¸–ç•Œèƒ½åšä»€ä¹ˆã€‚
""",
        "problem": "ä¼ ç»Ÿç¼–ç¨‹æ— æ³•è§£å†³å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰æ¨¡ç³Šã€å¤æ‚çš„é—®é¢˜ã€‚",
        "solution": "åˆ©ç”¨ç¥ç»ç½‘ç»œæ¨¡æ‹Ÿäººè„‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œé€šè¿‡æ•°æ®é©±åŠ¨æ¥è§£å†³é—®é¢˜ã€‚"
    },
    "301_è¯¾ç¨‹1_ç¬¬1å‘¨_æ·±åº¦å­¦ä¹ æ¦‚è¿°": { # Similar to above
        "title": "æ·±åº¦å­¦ä¹ æ¦‚è¿°: AIå¤å…´",
        "analogy_title": "ğŸ“ˆ ä¸ºä»€ä¹ˆç°åœ¨ç«äº†ï¼Ÿ",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
æ·±åº¦å­¦ä¹ çš„æ¦‚å¿µå‡ åå¹´å‰å°±æœ‰äº†ï¼Œä¸ºä»€ä¹ˆæœ€è¿‘æ‰ç«ï¼Ÿ
è¿™å°±å¥½æ¯”**è’¸æ±½æœº**ï¼ˆç®—æ³•ï¼‰æ—©å°±å‘æ˜äº†ï¼Œä½†æ²¡æœ‰**ç…¤**ï¼ˆå¤§æ•°æ®ï¼‰å’Œ**åšå›ºçš„é”…ç‚‰**ï¼ˆGPUç®—åŠ›ï¼‰ã€‚

ç°åœ¨ï¼Œæ•°æ®å¤šäº†ï¼Œç”µè„‘å¿«äº†ï¼Œè’¸æ±½æœºç»ˆäºè·‘èµ·æ¥äº†ï¼
""",
        "problem": "äº†è§£æ·±åº¦å­¦ä¹ çš„å‘å±•å†å²å’Œé©±åŠ¨åŠ›ã€‚",
        "solution": "å¤§æ•°æ® + ç®—åŠ› + ç®—æ³•åˆ›æ–° = æ·±åº¦å­¦ä¹ çš„çˆ†å‘ã€‚"
    },
    "314_è¯¾ç¨‹2_ç¬¬1å‘¨_æ·±åº¦å­¦ä¹ çš„å®ç”¨å±‚é¢": {
        "title": "å®ç”¨å±‚é¢: è€å¸æœºçš„ç»éªŒ",
        "analogy_title": "ğŸš— é©¾æ ¡æ²¡æ•™çš„æŠ€å·§",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ å­¦ä¼šäº†å¼€è½¦ï¼ˆæ¨¡å‹åŸç†ï¼‰ï¼Œä½†ä¸Šè·¯è¿˜æ˜¯ä¼šç†„ç«ã€‚
ä½ éœ€è¦è€å¸æœºçš„ç»éªŒï¼š
- **æ•°æ®é›†åˆ†å‰²**: å“ªéƒ¨åˆ†ç”¨æ¥ç»ƒæ‰‹ï¼ˆè®­ç»ƒé›†ï¼‰ï¼Œå“ªéƒ¨åˆ†ç”¨æ¥æ¨¡æ‹Ÿè€ƒï¼ˆéªŒè¯é›†ï¼‰ï¼Œå“ªéƒ¨åˆ†æ˜¯æ­£å¼è€ƒï¼ˆæµ‹è¯•é›†ï¼‰ã€‚
- **åå·®ä¸æ–¹å·®**: æ˜¯æ²¡å­¦å¥½ï¼ˆæ¬ æ‹Ÿåˆï¼‰ï¼Œè¿˜æ˜¯æ­»è®°ç¡¬èƒŒï¼ˆè¿‡æ‹Ÿåˆï¼‰ï¼Ÿ

è¿™äº›éƒ½æ˜¯å®æˆ˜ä¸­å¿…é¡»æŒæ¡çš„ç”Ÿå­˜æŠ€å·§ã€‚
""",
        "problem": "æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ä¸€å¡Œç³Šæ¶‚ã€‚",
        "solution": "é€šè¿‡åˆç†çš„æ•°æ®åˆ’åˆ†å’Œåå·®/æ–¹å·®åˆ†æï¼Œè¯Šæ–­å¹¶ä¼˜åŒ–æ¨¡å‹æ€§èƒ½ã€‚"
    },
    "323_è¯¾ç¨‹3_ç¬¬1å‘¨_æœºå™¨å­¦ä¹ ç­–ç•¥ï¼ˆä¸Šï¼‰": {
        "title": "æœºå™¨å­¦ä¹ ç­–ç•¥: å†›å¸ˆçš„é”¦å›Š",
        "analogy_title": "ğŸ¹ ä»—æ€ä¹ˆæ‰“ï¼Ÿ",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ çš„æ¨¡å‹æ•ˆæœä¸å¥½ã€‚
æ‰‹ä¸‹ï¼ˆå·¥ç¨‹å¸ˆï¼‰é—®ä½ ï¼š
- "æˆ‘ä»¬è¦ä¸è¦æ”¶é›†æ›´å¤šæ•°æ®ï¼Ÿ"
- "è¦ä¸è¦è°ƒå¤§æ¨¡å‹ï¼Ÿ"
- "è¦ä¸è¦è®­ç»ƒä¹…ä¸€ç‚¹ï¼Ÿ"

ä½ ä¸èƒ½ççŒœã€‚ä½ éœ€è¦åƒè¯¸è‘›äº®ä¸€æ ·ï¼Œæ ¹æ®**æ­£äº¤åŒ–ï¼ˆOrthogonalizationï¼‰** åŸåˆ™ï¼Œå‡†ç¡®åˆ¤æ–­å‡ºé—®é¢˜å‡ºåœ¨å“ªï¼Œç„¶åç»™å‡ºä¸€ä¸ªé”¦å›Šå¦™è®¡ã€‚
""",
        "problem": "ä¼˜åŒ–æ¨¡å‹çš„æ–¹å‘å¤ªå¤šï¼Œç›²ç›®å°è¯•ä¼šæµªè´¹å¤§é‡æ—¶é—´ã€‚",
        "solution": "å»ºç«‹ç»Ÿä¸€çš„è¯„ä¼°æŒ‡æ ‡ï¼Œä½¿ç”¨æ­£äº¤åŒ–ç­–ç•¥ï¼Œä¸€æ¬¡åªè§£å†³ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ã€‚"
    },
    "324_è¯¾ç¨‹3_ç¬¬2å‘¨_æœºå™¨å­¦ä¹ ç­–ç•¥ï¼ˆä¸‹ï¼‰": {
        "title": "æœºå™¨å­¦ä¹ ç­–ç•¥: è¯¯å·®åˆ†æ",
        "analogy_title": "ğŸ” é”™é¢˜æœ¬",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ä½ è€ƒè¯•æ²¡è€ƒå¥½ã€‚
å­¦éœ¸ä¼šæ‹¿å‡ºä¸€ä¸ª**é”™é¢˜æœ¬**ï¼Œåˆ†æï¼š
- "è¿™é“é¢˜æ˜¯å› ä¸ºç²—å¿ƒé”™çš„ã€‚"
- "é‚£é“é¢˜æ˜¯å› ä¸ºå…¬å¼æ²¡èƒŒä¸‹æ¥ã€‚"

**è¯¯å·®åˆ†æ** å°±æ˜¯æ£€æŸ¥æ¨¡å‹åšé”™çš„æ ·æœ¬ï¼Œçœ‹çœ‹å®ƒæ˜¯æŠŠ"ç‹—"çœ‹æˆäº†"çŒ«"ï¼Œè¿˜æ˜¯æŠŠ"èƒŒæ™¯"çœ‹æˆäº†"ç‰©ä½“"ã€‚
æ‰¾åˆ°åŸå› ï¼Œæ‰èƒ½å¯¹ç—‡ä¸‹è¯ã€‚
""",
        "problem": "æ¨¡å‹å‡†ç¡®ç‡å¡åœ¨90%ä¸Šä¸å»ï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆæå‡ã€‚",
        "solution": "äººå·¥æ£€æŸ¥é”™è¯¯æ ·æœ¬ï¼ˆError Analysisï¼‰ï¼Œç»Ÿè®¡é”™è¯¯ç±»å‹ï¼ŒæŒ‡å¯¼ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘ã€‚"
    },
    "316_è¯¾ç¨‹2_ç¬¬3å‘¨_è¶…å‚æ•°è°ƒè¯•ã€Batchæ­£åˆ™åŒ–å’Œç¼–ç¨‹æ¡†æ¶": {
        "title": "è¶…å‚æ•°è°ƒè¯•: ç‚¼ä¸¹æœ¯",
        "analogy_title": "ğŸ”¥ ç«å€™å¾ˆé‡è¦",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
è®­ç»ƒæ¨¡å‹å°±åƒ**ç‚¼ä¸¹**ã€‚
- å­¦ä¹ ç‡æ˜¯**ç«å€™**ã€‚
- Batch Sizeæ˜¯**ç‚‰å­å¤§å°**ã€‚
- å±‚æ•°æ˜¯**è¯æé…æ¯”**ã€‚

ç«å¤ªå¤§äº†ï¼ˆå­¦ä¹ ç‡é«˜ï¼‰ä¸¹ä¼šç‚¸ï¼ˆLossä¸æ”¶æ•›ï¼‰ï¼›ç«å¤ªå°äº†ï¼ˆå­¦ä¹ ç‡ä½ï¼‰ç‚¼ä¸å‡ºä¸¹ï¼ˆæ”¶æ•›æ…¢ï¼‰ã€‚
**Batch Normalization** å°±åƒæ˜¯ç»™ç‚‰å­åŠ äº†ä¸ª**æ’æ¸©å™¨**ï¼Œè®©ç«å€™æ›´å®¹æ˜“æ§åˆ¶ã€‚
""",
        "problem": "è¶…å‚æ•°ï¼ˆHyperparametersï¼‰å¤ªå¤šï¼Œæ‰‹åŠ¨è°ƒæ•´éå¸¸å›°éš¾ä¸”è€—æ—¶ã€‚",
        "solution": "ä½¿ç”¨éšæœºæœç´¢ç­–ç•¥å¯»æ‰¾è¶…å‚æ•°ï¼Œä½¿ç”¨Batch NormalizationåŠ é€Ÿè®­ç»ƒå¹¶æé«˜ç¨³å®šæ€§ã€‚"
    },
    
    # --- Others ---
    "343_è¯¾ç¨‹5_ç¬¬2å‘¨_ç‰¹å¾å‘é‡è¡¨å¾": {
        "title": "è¯å‘é‡: è¯è¯­åœ°å›¾",
        "analogy_title": "ğŸ—ºï¸ å›½ç‹ - ç”·äºº + å¥³äºº = ?",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
ç”µè„‘ä¸æ‡‚"è‹¹æœ"å’Œ"æ©˜å­"æ˜¯äº²æˆšã€‚
ä½†å¦‚æœæˆ‘ä»¬æŠŠå®ƒä»¬ç”»åœ¨åœ°å›¾ä¸Šï¼š
- "è‹¹æœ"å’Œ"æ©˜å­"ç¦»å¾—å¾ˆè¿‘ï¼ˆéƒ½æ˜¯æ°´æœï¼‰ã€‚
- "è‹¹æœ"å’Œ"æ±½è½¦"ç¦»å¾—å¾ˆè¿œã€‚

è¿™å°±æ˜¯**è¯å‘é‡ (Word Embeddings)**ã€‚
ç¥å¥‡çš„æ˜¯ï¼Œå¦‚æœä½ åœ¨åœ°å›¾ä¸Šä»"ç”·äºº"èµ°åˆ°"å›½ç‹"ï¼ŒåŒæ ·çš„è·ç¦»å’Œæ–¹å‘ï¼Œå¦‚æœä½ ä»"å¥³äºº"å‡ºå‘ï¼Œå°±ä¼šèµ°åˆ°"å¥³ç‹"ï¼
""",
        "problem": "One-hotç¼–ç æ— æ³•ä½“ç°è¯ä¸è¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚",
        "solution": "å°†è¯æ˜ å°„åˆ°ä½ç»´ç¨ å¯†å‘é‡ç©ºé—´ï¼Œæ•æ‰è¯æ±‡çš„è¯­ä¹‰å…³ç³»ã€‚"
    },
    "332_è¯¾ç¨‹4_ç¬¬4å‘¨_äººè„¸è¯†åˆ«ä¸ç¥ç»é£æ ¼è¿ç§»": {
        "title": "äººè„¸è¯†åˆ«: åˆ·è„¸è¿›é—¨",
        "analogy_title": "ğŸ‘¤ ä½ å°±æ˜¯å¯†ç ",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
**äººè„¸éªŒè¯ (1:1)**:
- æ‰‹æœºè§£é”ã€‚
- é—®ï¼š"è¿™æ˜¯ä¸»äººå—ï¼Ÿ" -> æ˜¯/ä¸æ˜¯ã€‚

**äººè„¸è¯†åˆ« (1:N)**:
- å…¬å¸æ‰“å¡ã€‚
- é—®ï¼š"è¿™æ˜¯å‡ ç™¾ä¸ªå‘˜å·¥é‡Œçš„è°ï¼Ÿ"

éš¾ç‚¹åœ¨äºï¼Œä½ ä»Šå¤©å¯èƒ½åŒ–äº†å¦†ï¼Œæˆ–è€…æˆ´äº†çœ¼é•œã€‚
**Triplet Loss (ä¸‰å…ƒç»„æŸå¤±)** å°±æ˜¯æ•™AIï¼š"ä¸ç®¡æ€ä¹ˆæ‰“æ‰®ï¼Œä½ è¿˜æ˜¯ä½ ï¼›ä¸ç®¡åˆ«äººæ€ä¹ˆåƒä½ ï¼Œä»–éƒ½ä¸æ˜¯ä½ ã€‚"
""",
        "problem": "åªæœ‰ä¸€å¼ ç…§ç‰‡ï¼ˆOne-shot Learningï¼‰ï¼Œå¦‚ä½•è®­ç»ƒå‡ºé«˜å‡†ç¡®ç‡çš„è¯†åˆ«ç³»ç»Ÿï¼Ÿ",
        "solution": "å­¦ä¹ ä¸€ä¸ªç›¸ä¼¼åº¦åº¦é‡å‡½æ•°ï¼ˆSiamese Networkï¼‰ï¼Œæ¯”è¾ƒä¸¤å¼ äººè„¸çš„è·ç¦»ã€‚"
    },
    "404_ä»£ç åˆ†æä¸å±•æœ›": {
        "title": "ä»£ç åˆ†æ: æ‹†è§£å‘åŠ¨æœº",
        "analogy_title": "ğŸ”§ çœ‹çœ‹é‡Œé¢æœ‰å•¥",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
æˆ‘ä»¬å·²ç»å¼€ç€è½¦ï¼ˆå¤§æ¨¡å‹ï¼‰è·‘äº†å‡ åœˆã€‚
ç°åœ¨ï¼ŒæŠŠè½¦åœä¸‹æ¥ï¼Œæ‰“å¼€å¼•æ“ç›–ï¼Œçœ‹çœ‹é‡Œé¢çš„**å‘åŠ¨æœºï¼ˆæºç ï¼‰**æ˜¯æ€ä¹ˆç»„è£…çš„ã€‚

è™½ç„¶æˆ‘ä»¬å¯èƒ½é€ ä¸å‡ºæ³•æ‹‰åˆ©ï¼Œä½†äº†è§£å®ƒçš„æ„é€ ï¼Œèƒ½è®©æˆ‘ä»¬æŠŠè½¦å¼€å¾—æ›´å¥½ï¼Œç”šè‡³èƒ½è‡ªå·±ä¿®è½¦ã€‚
""",
        "problem": "åªä¼šè°ƒç”¨APIæ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦æ·±å…¥ç†è§£åº•å±‚å®ç°æ‰èƒ½è¿›è¡Œå®šåˆ¶å¼€å‘ã€‚",
        "solution": "æ·±å…¥é˜…è¯»æ ¸å¿ƒä»£ç ï¼Œç†è§£æ¶æ„è®¾è®¡ï¼Œå±•æœ›æœªæ¥çš„ä¼˜åŒ–æ–¹å‘ã€‚"
    },
    "268_è¯¾ç¨‹æ€»ç»“å’Œè¿›é˜¶å­¦ä¹ ": {
        "title": "è¯¾ç¨‹æ€»ç»“: æ¯•ä¸šå…¸ç¤¼",
        "analogy_title": "ğŸ“ ä¸‹ä¸€ç«™ï¼Œå¤©å",
        "analogy_content": """
### ğŸ§ª æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯
æ­å–œä½ ï¼ä½ å·²ç»çˆ¬ä¸Šäº†æ·±åº¦å­¦ä¹ çš„ç¬¬ä¸€åº§å±±å³°ã€‚
å›å¤´çœ‹ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š
- ä¹é«˜ç§¯æœ¨ (Layer)
- æ‰¾ç‰¹å¾çš„æ‰‹ç”µç­’ (CNN)
- æœ‰è®°å¿†çš„ç¬”è®°æœ¬ (RNN)
- ç”šè‡³æ˜¯ä¸€äº›é­”æ³• (Attention)

ä½†è¿™åªæ˜¯å¼€å§‹ã€‚å‰é¢è¿˜æœ‰æ›´é«˜çš„å±±ï¼ˆTransformer, Diffusion, RLï¼‰ç­‰ç€ä½ å»å¾æœã€‚
å¸¦ä¸Šä½ çš„è£…å¤‡ï¼Œç»§ç»­å‡ºå‘å§ï¼
""",
        "problem": "å­¦äº†å¾ˆå¤šç¢ç‰‡åŒ–çš„çŸ¥è¯†ï¼Œéœ€è¦ç³»ç»Ÿåœ°æ¢³ç†å’Œæ•´åˆã€‚",
        "solution": "å›é¡¾æ ¸å¿ƒçŸ¥è¯†ä½“ç³»ï¼Œæ„å»ºæ€ç»´å¯¼å›¾ï¼Œå¹¶è§„åˆ’ä¸‹ä¸€æ­¥çš„è¿›é˜¶å­¦ä¹ è·¯çº¿ã€‚"
    }
}

# Standard template for High School Friendly intro
TEMPLATE = """
# {title}

**åˆ†ç±»:** {category}

**{analogy_title}**

---

{analogy_content}

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæŠ€æœ¯?

**é—®é¢˜:** {problem}

**è§£å†³:** {solution}

### ğŸ“š å¾ªåºæ¸è¿›å­¦ä¹ 

**ç¬¬ä¸€æ­¥: ç†è§£é—®é¢˜** (ä½ ç°åœ¨åœ¨è¿™é‡Œ)
- ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæŠ€æœ¯?
- å®ƒè§£å†³ä»€ä¹ˆé—®é¢˜?

**ç¬¬äºŒæ­¥: å­¦ä¹ åŸç†** (æ¥ä¸‹æ¥)
- è¿™ä¸ªæŠ€æœ¯å¦‚ä½•å·¥ä½œ?
- æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆ?

**ç¬¬ä¸‰æ­¥: å®é™…åº”ç”¨** (æœ€å)
- å¦‚ä½•åº”ç”¨åˆ°å®é™…é¡¹ç›®?
- å¦‚ä½•è§£å†³å®é™…é—®é¢˜?
"""

def optimize_notebook(file_path):
    # Determine filename key
    filename = os.path.basename(file_path).replace('.ipynb', '')
    
    # Logic to find config
    config = None
    
    # 1. Exact or partial match in CONCEPT_MAP
    for key in CONCEPT_MAP:
        if key in filename:
            config = CONCEPT_MAP[key]
            break
            
    if not config:
        print(f"Skipping {filename} - No specific config found.")
        return

    print(f"Processing {file_path} with config: {config['title']}...")
    
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            notebook = json.load(f)
    except Exception as e:
        print(f"Error reading {file_path}: {e}")
        return

    # Determine category
    category = "æ·±åº¦å­¦ä¹ åŸºç¡€"
    if "40" in filename: category = "å¤§æ¨¡å‹ (LLM)"
    elif "3" in filename: category = "å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹"
    elif "2" in filename: category = "æ·±åº¦å­¦ä¹ åŸç†"
    elif "1" in filename: category = "PyTorchå·¥å…·ç®±"

    # Create header
    new_header_source = TEMPLATE.format(
        title=filename.split('_', 1)[1] if '_' in filename else filename,
        category=category,
        analogy_title=config['analogy_title'],
        analogy_content=config['analogy_content'].strip(),
        problem=config['problem'],
        solution=config['solution']
    )

    new_header_lines = [line + '\n' for line in new_header_source.split('\n')]
    if new_header_lines and new_header_lines[-1] == '\n':
        new_header_lines.pop()

    # Update Notebook
    # 1. Header (First Cell)
    if notebook['cells'] and notebook['cells'][0]['cell_type'] == 'markdown':
        notebook['cells'][0]['source'] = new_header_lines
    else:
        notebook['cells'].insert(0, {
            "cell_type": "markdown",
            "metadata": {},
            "source": new_header_lines
        })
        
    # Save back
    with open(file_path, 'w', encoding='utf-8') as f:
        json.dump(notebook, f, indent=1, ensure_ascii=False)
    print(f"âœ… Optimized {filename}")

def main():
    base_dir = Path("/Users/h/practice/CV-main")
    
    # Only iterate files that are likely to be in our map (or all)
    all_notebooks = list(base_dir.glob("**/*.ipynb"))
    
    for file_path in all_notebooks:
        optimize_notebook(str(file_path))

if __name__ == "__main__":
    main()
